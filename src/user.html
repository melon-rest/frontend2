<!doctype html>
<html>
<head>
  	<meta charset="UTF-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<link href="tw.css" rel="stylesheet">
</head>
<body>
	<div class="flex h-screen bg-gray-900" id="background">
		<div class="m-auto max-w-lg p-8 backdrop-blur-lg text-white shadow-2xl grid grid-cols-2 gap-2 bg-cover">
			<div>
				<img class="w-64 aspect-square" id="profile_picture">
			</div>
			
			<div>
				<h1 class="text-xl break-all" id="username"></h1>
				<div class="text-sm break-all" id="contact"></div>
				
				<div class="max-h-[10rem] overflow-auto break-all max-w-lg whitespace-pre-line" id="description"></div>
			</div>

		</div>
	</div>
	<script type="module">
		const username = document.location.href.split("#")[1]
		const req = await fetch("https://api.melon.rest/api/v1/user/" + username);

		if(req.ok) {
			// yay
			const json = await req.json();
			document.getElementById("description").innerText = json.description;
			document.getElementById("username").innerText = json.username;
			document.getElementById("contact").innerText = json.contact;
			
			document.getElementById("profile_picture").src = 
				json.profile_picture ? "https://cdn.melon.rest/melon-rest/" + json.username + "_pfp" :
					"url(https://cdn.discordapp.com/attachments/922128925692420176/946504823220621384/missing-profile.png)"
			

			document.getElementById("background").style.backgroundImage  = 
				json.background ? "https://cdn.melon.rest/melon-rest/" + json.username + "_bg" :
					"url(https://wallpapersmug.com/download/1920x1080/5c67c8/watermelons-fruits-pattern-digital-art.jpg)"

		} else {
			document.getElementById("description").innerText = "This user you queried does not exist.";
			document.getElementById("username").innerText = "missing user :(";
			document.getElementById("contact").innerText = "";
			document.getElementById("profile_picture").src = "https://cdn.discordapp.com/attachments/922128925692420176/946504823220621384/missing-profile.png"
			document.getElementById("background").style.backgroundImage = "url(https://wallpapersmug.com/download/1920x1080/5c67c8/watermelons-fruits-pattern-digital-art.jpg)"


		}
	</script>
</body>
</html>